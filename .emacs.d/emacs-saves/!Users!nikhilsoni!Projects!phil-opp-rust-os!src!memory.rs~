use x86_64::structures::paging::PageTable;
use x86_64::registers::control::Cr3;
use x86_64::VirtAddr;

pub unsafe fn active_level4_table(physical_memory_offset: u64)
                                  -> &'static mut PageTable
{
    let (l4_table_frame, _) = Cr3.read();

    let phys = l4_table_frame.start_address();
    let virt = VirtAddr::new(phys.as_u64() + physical_memory_offset);

    let page_table_ptr: *mut PageTable = virt.as_mut_prt();
    &mut *page_table_ptr;  // unsafe
