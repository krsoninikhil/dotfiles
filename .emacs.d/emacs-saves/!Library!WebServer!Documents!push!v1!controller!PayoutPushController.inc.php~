<?php

require_once(ROOT . "/v1/controller/BaseController.inc.php");
require_once(ROOT . "/v1/handler/AxisSoapHandler.inc.php");

class PayoutPushController extends BaseController {

    public function axisBankTransferPush($f3) {
        $whiteListIps = array("172.18.0.1");
        $this->validateIP($f3, $whiteListIps);

        $postJson = trim($f3->get('BODY'));
		//PayoutUtil::isJson($f3, $postJson);

		$requestParams  = json_decode($postJson, true);

        $params = array(
            "bankReferenceNo" => $requestParams["TRANSACTION_UTR_NO"],
            "cfTransferId" => $requestParams["CLIENT_BATCH_NO"],
            "bankRef" => $requestParams["BANK_REFERENCE_NUMBER"],
            "amount" => $requestParams["amount"],
            "bankStatus" => $requestParams["STATUS_CODE"],
            "processedOn" => $requestParams["TRANSACTION_VALUE_DATE"],
            "bankId" => "6",
        );
        $response = CurlUtil::post($params, $this->host."/updateByPush", $headers);
        return $response["message"];

    }

}


?>
