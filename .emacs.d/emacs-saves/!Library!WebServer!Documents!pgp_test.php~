<?php

 function pgpEncrypt($data, $pubKeyPath) {
        $key = file_get_contents($pubKeyPath);
        putenv("GNUPGHOME=/pubkeys/.gnupg");

        $gpg = new gnupg();
        $keyInfo = $gpg->import($key);
        $gpg->addencryptkey($keyInfo["fingerprint"]);
        $enc = $gpg->encrypt($data);
        return $enc;
 }

function pgpDecrypt($data, $pvtKeyPath) {
        $key = file_get_contents($pvtKeyPath);
        putenv("GNUPGHOME=/pubkeys/.gnupg");

        $gpg = new gnupg();
        $keyInfo = $gpg->import($key);
        $gpg->adddecryptkey($keyInfo["fingerprint"], "");
        $enc = $gpg->decrypt($data);
        return $enc;
}



$pvtKeyPath = "/usr/local/crt/private.pgp";
$pubKeyPath = "/usr/local/crt/cashfree_public.pgp";
$data = "Cashfree";

$enc = pgpEncrypt($data, $pubKeyPath);
print("Enc: ".$enc);

$dec = phpDecrypt($enc, $pvtKeyPath);
print("Dec: ".$dec);

?>
